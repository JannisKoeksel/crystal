%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left

    subgraph "Buckets for queries/unions-table/by-id-987654321"
    Bucket0("Bucket 0 (root)<br /><br />1: <br />ᐳ: 8, 9, 61, 134, 10<br />2: PgSelect[7], PgUnionAll[19]<br />ᐳ: Access[11], Access[133]<br />3: First[12], First[21]<br />ᐳ: 13, 14, 16, 17, 59, 60, 62, 63, 64, 65"):::bucket
    Bucket1("Bucket 1 (polymorphic)<br />__typename: Lambda[16]<br />Deps: 16, 10, 17"):::bucket
    Bucket2("Bucket 2 (polymorphic)<br />__typename: Access[64]<br />Deps: 64, 10, 65"):::bucket
    Bucket3("Bucket 3 (polymorphicPartition)<br />|UnionTopic<br />Deps: 10, 17<br />ᐳUnionTopic<br /><br />1: PgSelect[24]<br />ᐳ: Access[28]<br />2: First[29]<br />ᐳ: 30, 105, 115"):::bucket
    Bucket4("Bucket 4 (polymorphicPartition)<br />|UnionPost<br />Deps: 10, 17<br />ᐳUnionPost<br /><br />1: PgSelect[31]<br />ᐳ: Access[35]<br />2: First[36]<br />ᐳ: 37, 106, 116, 125, 131"):::bucket
    Bucket5("Bucket 5 (polymorphicPartition)<br />|UnionDivider<br />Deps: 10, 17<br />ᐳUnionDivider<br /><br />1: PgSelect[38]<br />ᐳ: Access[42]<br />2: First[43]<br />ᐳ: 44, 107, 117, 126"):::bucket
    Bucket6("Bucket 6 (polymorphicPartition)<br />|UnionChecklist<br />Deps: 10, 17<br />ᐳUnionChecklist<br /><br />1: PgSelect[45]<br />ᐳ: Access[49]<br />2: First[50]<br />ᐳ: 51, 108, 118"):::bucket
    Bucket7("Bucket 7 (polymorphicPartition)<br />|UnionChecklistItem<br />Deps: 10, 17<br />ᐳUnionChecklistItem<br /><br />1: PgSelect[52]<br />ᐳ: Access[56]<br />2: First[57]<br />ᐳ: 58, 109, 119, 127"):::bucket
    Bucket8("Bucket 8 (polymorphicPartition)<br />|UnionTopic<br />Deps: 10, 65<br />ᐳUnionTopic<br /><br />1: PgSelect[66]<br />ᐳ: Access[70]<br />2: First[71]<br />ᐳ: 72, 110, 120"):::bucket
    Bucket9("Bucket 9 (polymorphicPartition)<br />|UnionPost<br />Deps: 10, 65<br />ᐳUnionPost<br /><br />1: PgSelect[74]<br />ᐳ: Access[78]<br />2: First[79]<br />ᐳ: 80, 111, 121, 128, 132"):::bucket
    Bucket10("Bucket 10 (polymorphicPartition)<br />|UnionDivider<br />Deps: 10, 65<br />ᐳUnionDivider<br /><br />1: PgSelect[82]<br />ᐳ: Access[86]<br />2: First[87]<br />ᐳ: 88, 112, 122, 129"):::bucket
    Bucket11("Bucket 11 (polymorphicPartition)<br />|UnionChecklist<br />Deps: 10, 65<br />ᐳUnionChecklist<br /><br />1: PgSelect[90]<br />ᐳ: Access[94]<br />2: First[95]<br />ᐳ: 96, 113, 123"):::bucket
    Bucket12("Bucket 12 (polymorphicPartition)<br />|UnionChecklistItem<br />Deps: 10, 65<br />ᐳUnionChecklistItem<br /><br />1: PgSelect[98]<br />ᐳ: Access[102]<br />2: First[103]<br />ᐳ: 104, 114, 124, 130"):::bucket
    end
    Bucket0 --> Bucket1 & Bucket2
    Bucket1 --> Bucket3 & Bucket4 & Bucket5 & Bucket6 & Bucket7
    Bucket2 --> Bucket8 & Bucket9 & Bucket10 & Bucket11 & Bucket12

    %% plan dependencies
    List62{{"List[62∈0] ➊<br />ᐸ59,60,61ᐳ<br />More deps:<br />- Constantᐸ[HIDDEN]ᐳ[61]"}}:::plan
    Access59{{"Access[59∈0] ➊<br />ᐸ21.0ᐳ"}}:::plan
    Access60{{"Access[60∈0] ➊<br />ᐸ21.1ᐳ"}}:::plan
    Access59 & Access60 --> List62
    PgSelect7[["PgSelect[7∈0] ➊<br />ᐸunion_itemsᐳ<br />More deps:<br />- Object[10]<br />- Constantᐸ987654321ᐳ[134]"]]:::plan
    Object10{{"Object[10∈0] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ<br />Dependents: 12"}}:::plan
    Access8{{"Access[8∈0] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access9{{"Access[9∈0] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access8 & Access9 --> Object10
    PgUnionAll19[["PgUnionAll[19∈0] ➊<br />ᐸUnionTopic,UnionPost,UnionDivider,UnionChecklist,UnionChecklistItemᐳ<br />More deps:<br />- Object[10]<br />- Constantᐸ987654321ᐳ[134]"]]:::plan
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access8
    __Value2 --> Access9
    Access11{{"Access[11∈0] ➊<br />ᐸ7.itemsᐳ"}}:::plan
    PgSelect7 --> Access11
    First12[["First[12∈0] ➊"]]:::plan
    Access11 --> First12
    PgSelectSingle13{{"PgSelectSingle[13∈0] ➊<br />ᐸunion_itemsᐳ"}}:::plan
    First12 --> PgSelectSingle13
    PgClassExpression14{{"PgClassExpression[14∈0] ➊<br />ᐸ__union_items__.”type”ᐳ"}}:::plan
    PgSelectSingle13 --> PgClassExpression14
    PgClassExpression17{{"PgClassExpression[17∈0] ➊<br />ᐸ__union_items__.”id”ᐳ"}}:::plan
    PgSelectSingle13 --> PgClassExpression17
    First21[["First[21∈0] ➊"]]:::plan
    Access133{{"Access[133∈0] ➊<br />ᐸ19.itemsᐳ"}}:::plan
    Access133 --> First21
    First21 --> Access59
    First21 --> Access60
    Lambda63{{"Lambda[63∈0] ➊<br />ᐸtoSpecifierᐳ"}}:::plan
    List62 --> Lambda63
    Access65{{"Access[65∈0] ➊<br />ᐸ63.idᐳ"}}:::plan
    Lambda63 --> Access65
    PgUnionAll19 --> Access133
    PgSelect24[["PgSelect[24∈3] ➊<br />ᐸunion_topicsᐳ<br />ᐳUnionTopic<br />More deps:<br />- Object[10]"]]:::plan
    PgClassExpression17 --> PgSelect24
    Access28{{"Access[28∈3] ➊^<br />ᐸ24.itemsᐳ"}}:::plan
    PgSelect24 --> Access28
    First29[["First[29∈3] ➊^"]]:::plan
    Access28 --> First29
    PgSelectSingle30{{"PgSelectSingle[30∈3] ➊^<br />ᐸunion_topicsᐳ"}}:::plan
    First29 --> PgSelectSingle30
    PgClassExpression105{{"PgClassExpression[105∈3] ➊^<br />ᐸ__union_topics__.”id”ᐳ"}}:::plan
    PgSelectSingle30 --> PgClassExpression105
    PgClassExpression115{{"PgClassExpression[115∈3] ➊^<br />ᐸ__union_to...__.”title”ᐳ"}}:::plan
    PgSelectSingle30 --> PgClassExpression115
    PgSelect31[["PgSelect[31∈4] ➊<br />ᐸunion_postsᐳ<br />ᐳUnionPost<br />More deps:<br />- Object[10]"]]:::plan
    PgClassExpression17 --> PgSelect31
    Access35{{"Access[35∈4] ➊^<br />ᐸ31.itemsᐳ"}}:::plan
    PgSelect31 --> Access35
    First36[["First[36∈4] ➊^"]]:::plan
    Access35 --> First36
    PgSelectSingle37{{"PgSelectSingle[37∈4] ➊^<br />ᐸunion_postsᐳ"}}:::plan
    First36 --> PgSelectSingle37
    PgClassExpression106{{"PgClassExpression[106∈4] ➊^<br />ᐸ__union_posts__.”id”ᐳ"}}:::plan
    PgSelectSingle37 --> PgClassExpression106
    PgClassExpression116{{"PgClassExpression[116∈4] ➊^<br />ᐸ__union_posts__.”title”ᐳ"}}:::plan
    PgSelectSingle37 --> PgClassExpression116
    PgClassExpression125{{"PgClassExpression[125∈4] ➊^<br />ᐸ__union_po...scription”ᐳ"}}:::plan
    PgSelectSingle37 --> PgClassExpression125
    PgClassExpression131{{"PgClassExpression[131∈4] ➊^<br />ᐸ__union_posts__.”note”ᐳ"}}:::plan
    PgSelectSingle37 --> PgClassExpression131
    PgSelect38[["PgSelect[38∈5] ➊<br />ᐸunion_dividersᐳ<br />ᐳUnionDivider<br />More deps:<br />- Object[10]"]]:::plan
    PgClassExpression17 --> PgSelect38
    Access42{{"Access[42∈5] ➊^<br />ᐸ38.itemsᐳ"}}:::plan
    PgSelect38 --> Access42
    First43[["First[43∈5] ➊^"]]:::plan
    Access42 --> First43
    PgSelectSingle44{{"PgSelectSingle[44∈5] ➊^<br />ᐸunion_dividersᐳ"}}:::plan
    First43 --> PgSelectSingle44
    PgClassExpression107{{"PgClassExpression[107∈5] ➊^<br />ᐸ__union_dividers__.”id”ᐳ"}}:::plan
    PgSelectSingle44 --> PgClassExpression107
    PgClassExpression117{{"PgClassExpression[117∈5] ➊^<br />ᐸ__union_di...__.”title”ᐳ"}}:::plan
    PgSelectSingle44 --> PgClassExpression117
    PgClassExpression126{{"PgClassExpression[126∈5] ➊^<br />ᐸ__union_di...__.”color”ᐳ"}}:::plan
    PgSelectSingle44 --> PgClassExpression126
    PgSelect45[["PgSelect[45∈6] ➊<br />ᐸunion_checklistsᐳ<br />ᐳUnionChecklist<br />More deps:<br />- Object[10]"]]:::plan
    PgClassExpression17 --> PgSelect45
    Access49{{"Access[49∈6] ➊^<br />ᐸ45.itemsᐳ"}}:::plan
    PgSelect45 --> Access49
    First50[["First[50∈6] ➊^"]]:::plan
    Access49 --> First50
    PgSelectSingle51{{"PgSelectSingle[51∈6] ➊^<br />ᐸunion_checklistsᐳ"}}:::plan
    First50 --> PgSelectSingle51
    PgClassExpression108{{"PgClassExpression[108∈6] ➊^<br />ᐸ__union_ch...sts__.”id”ᐳ"}}:::plan
    PgSelectSingle51 --> PgClassExpression108
    PgClassExpression118{{"PgClassExpression[118∈6] ➊^<br />ᐸ__union_ch...__.”title”ᐳ"}}:::plan
    PgSelectSingle51 --> PgClassExpression118
    PgSelect52[["PgSelect[52∈7] ➊<br />ᐸunion_checklist_itemsᐳ<br />ᐳUnionChecklistItem<br />More deps:<br />- Object[10]"]]:::plan
    PgClassExpression17 --> PgSelect52
    Access56{{"Access[56∈7] ➊^<br />ᐸ52.itemsᐳ"}}:::plan
    PgSelect52 --> Access56
    First57[["First[57∈7] ➊^"]]:::plan
    Access56 --> First57
    PgSelectSingle58{{"PgSelectSingle[58∈7] ➊^<br />ᐸunion_checklist_itemsᐳ"}}:::plan
    First57 --> PgSelectSingle58
    PgClassExpression109{{"PgClassExpression[109∈7] ➊^<br />ᐸ__union_ch...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle58 --> PgClassExpression109
    PgClassExpression119{{"PgClassExpression[119∈7] ➊^<br />ᐸ__union_ch...scription”ᐳ"}}:::plan
    PgSelectSingle58 --> PgClassExpression119
    PgClassExpression127{{"PgClassExpression[127∈7] ➊^<br />ᐸ__union_ch...s__.”note”ᐳ"}}:::plan
    PgSelectSingle58 --> PgClassExpression127
    PgSelect66[["PgSelect[66∈8] ➊<br />ᐸunion_topicsᐳ<br />ᐳUnionTopic<br />More deps:<br />- Object[10]"]]:::plan
    Access65 --> PgSelect66
    Access70{{"Access[70∈8] ➊^<br />ᐸ66.itemsᐳ"}}:::plan
    PgSelect66 --> Access70
    First71[["First[71∈8] ➊^"]]:::plan
    Access70 --> First71
    PgSelectSingle72{{"PgSelectSingle[72∈8] ➊^<br />ᐸunion_topicsᐳ"}}:::plan
    First71 --> PgSelectSingle72
    PgClassExpression110{{"PgClassExpression[110∈8] ➊^<br />ᐸ__union_topics__.”id”ᐳ"}}:::plan
    PgSelectSingle72 --> PgClassExpression110
    PgClassExpression120{{"PgClassExpression[120∈8] ➊^<br />ᐸ__union_to...__.”title”ᐳ"}}:::plan
    PgSelectSingle72 --> PgClassExpression120
    PgSelect74[["PgSelect[74∈9] ➊<br />ᐸunion_postsᐳ<br />ᐳUnionPost<br />More deps:<br />- Object[10]"]]:::plan
    Access65 --> PgSelect74
    Access78{{"Access[78∈9] ➊^<br />ᐸ74.itemsᐳ"}}:::plan
    PgSelect74 --> Access78
    First79[["First[79∈9] ➊^"]]:::plan
    Access78 --> First79
    PgSelectSingle80{{"PgSelectSingle[80∈9] ➊^<br />ᐸunion_postsᐳ"}}:::plan
    First79 --> PgSelectSingle80
    PgClassExpression111{{"PgClassExpression[111∈9] ➊^<br />ᐸ__union_posts__.”id”ᐳ"}}:::plan
    PgSelectSingle80 --> PgClassExpression111
    PgClassExpression121{{"PgClassExpression[121∈9] ➊^<br />ᐸ__union_posts__.”title”ᐳ"}}:::plan
    PgSelectSingle80 --> PgClassExpression121
    PgClassExpression128{{"PgClassExpression[128∈9] ➊^<br />ᐸ__union_po...scription”ᐳ"}}:::plan
    PgSelectSingle80 --> PgClassExpression128
    PgClassExpression132{{"PgClassExpression[132∈9] ➊^<br />ᐸ__union_posts__.”note”ᐳ"}}:::plan
    PgSelectSingle80 --> PgClassExpression132
    PgSelect82[["PgSelect[82∈10] ➊<br />ᐸunion_dividersᐳ<br />ᐳUnionDivider<br />More deps:<br />- Object[10]"]]:::plan
    Access65 --> PgSelect82
    Access86{{"Access[86∈10] ➊^<br />ᐸ82.itemsᐳ"}}:::plan
    PgSelect82 --> Access86
    First87[["First[87∈10] ➊^"]]:::plan
    Access86 --> First87
    PgSelectSingle88{{"PgSelectSingle[88∈10] ➊^<br />ᐸunion_dividersᐳ"}}:::plan
    First87 --> PgSelectSingle88
    PgClassExpression112{{"PgClassExpression[112∈10] ➊^<br />ᐸ__union_dividers__.”id”ᐳ"}}:::plan
    PgSelectSingle88 --> PgClassExpression112
    PgClassExpression122{{"PgClassExpression[122∈10] ➊^<br />ᐸ__union_di...__.”title”ᐳ"}}:::plan
    PgSelectSingle88 --> PgClassExpression122
    PgClassExpression129{{"PgClassExpression[129∈10] ➊^<br />ᐸ__union_di...__.”color”ᐳ"}}:::plan
    PgSelectSingle88 --> PgClassExpression129
    PgSelect90[["PgSelect[90∈11] ➊<br />ᐸunion_checklistsᐳ<br />ᐳUnionChecklist<br />More deps:<br />- Object[10]"]]:::plan
    Access65 --> PgSelect90
    Access94{{"Access[94∈11] ➊^<br />ᐸ90.itemsᐳ"}}:::plan
    PgSelect90 --> Access94
    First95[["First[95∈11] ➊^"]]:::plan
    Access94 --> First95
    PgSelectSingle96{{"PgSelectSingle[96∈11] ➊^<br />ᐸunion_checklistsᐳ"}}:::plan
    First95 --> PgSelectSingle96
    PgClassExpression113{{"PgClassExpression[113∈11] ➊^<br />ᐸ__union_ch...sts__.”id”ᐳ"}}:::plan
    PgSelectSingle96 --> PgClassExpression113
    PgClassExpression123{{"PgClassExpression[123∈11] ➊^<br />ᐸ__union_ch...__.”title”ᐳ"}}:::plan
    PgSelectSingle96 --> PgClassExpression123
    PgSelect98[["PgSelect[98∈12] ➊<br />ᐸunion_checklist_itemsᐳ<br />ᐳUnionChecklistItem<br />More deps:<br />- Object[10]"]]:::plan
    Access65 --> PgSelect98
    Access102{{"Access[102∈12] ➊^<br />ᐸ98.itemsᐳ"}}:::plan
    PgSelect98 --> Access102
    First103[["First[103∈12] ➊^"]]:::plan
    Access102 --> First103
    PgSelectSingle104{{"PgSelectSingle[104∈12] ➊^<br />ᐸunion_checklist_itemsᐳ"}}:::plan
    First103 --> PgSelectSingle104
    PgClassExpression114{{"PgClassExpression[114∈12] ➊^<br />ᐸ__union_ch...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle104 --> PgClassExpression114
    PgClassExpression124{{"PgClassExpression[124∈12] ➊^<br />ᐸ__union_ch...scription”ᐳ"}}:::plan
    PgSelectSingle104 --> PgClassExpression124
    PgClassExpression130{{"PgClassExpression[130∈12] ➊^<br />ᐸ__union_ch...s__.”note”ᐳ"}}:::plan
    PgSelectSingle104 --> PgClassExpression130

    %% define steps
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,PgSelect7,Access8,Access9,Object10,Access11,First12,PgSelectSingle13,PgClassExpression14,PgClassExpression17,PgUnionAll19,First21,Access59,Access60,List62,Lambda63,Access65,Access133 bucket0
    classDef bucket1 stroke:#00bfff
    class Bucket1 bucket1
    classDef bucket2 stroke:#7f007f
    class Bucket2 bucket2
    classDef bucket3 stroke:#ffa500
    class Bucket3,PgSelect24,Access28,First29,PgSelectSingle30,PgClassExpression105,PgClassExpression115 bucket3
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgSelect31,Access35,First36,PgSelectSingle37,PgClassExpression106,PgClassExpression116,PgClassExpression125,PgClassExpression131 bucket4
    classDef bucket5 stroke:#7fff00
    class Bucket5,PgSelect38,Access42,First43,PgSelectSingle44,PgClassExpression107,PgClassExpression117,PgClassExpression126 bucket5
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgSelect45,Access49,First50,PgSelectSingle51,PgClassExpression108,PgClassExpression118 bucket6
    classDef bucket7 stroke:#808000
    class Bucket7,PgSelect52,Access56,First57,PgSelectSingle58,PgClassExpression109,PgClassExpression119,PgClassExpression127 bucket7
    classDef bucket8 stroke:#dda0dd
    class Bucket8,PgSelect66,Access70,First71,PgSelectSingle72,PgClassExpression110,PgClassExpression120 bucket8
    classDef bucket9 stroke:#ff0000
    class Bucket9,PgSelect74,Access78,First79,PgSelectSingle80,PgClassExpression111,PgClassExpression121,PgClassExpression128,PgClassExpression132 bucket9
    classDef bucket10 stroke:#ffff00
    class Bucket10,PgSelect82,Access86,First87,PgSelectSingle88,PgClassExpression112,PgClassExpression122,PgClassExpression129 bucket10
    classDef bucket11 stroke:#00ffff
    class Bucket11,PgSelect90,Access94,First95,PgSelectSingle96,PgClassExpression113,PgClassExpression123 bucket11
    classDef bucket12 stroke:#4169e1
    class Bucket12,PgSelect98,Access102,First103,PgSelectSingle104,PgClassExpression114,PgClassExpression124,PgClassExpression130 bucket12

