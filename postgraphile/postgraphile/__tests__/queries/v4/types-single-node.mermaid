%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left

    subgraph "Buckets for queries/v4/types-single-node"
    Bucket0("Bucket 0 (root)"):::bucket
    Bucket1("Bucket 1 (polymorphic)<br />__typename: Lambda[8]<br />Deps: 2, 7, 8, 4"):::bucket
    Bucket2("Bucket 2 (polymorphicPartition)<br />|Query<br />Deps: 4<br />ᐳQuery"):::bucket
    Bucket3("Bucket 3 (polymorphicPartition)<br />|Input<br />Deps: 16, 203<br />ᐳInput<br /><br />1: PgSelect[13]<br />ᐳ: Access[17]<br />2: First[18]<br />ᐳ: PgSelectSingle[19]"):::bucket
    Bucket4("Bucket 4 (polymorphicPartition)<br />|Patch<br />Deps: 16, 203<br />ᐳPatch<br /><br />1: PgSelect[23]<br />ᐳ: Access[27]<br />2: First[28]<br />ᐳ: PgSelectSingle[29]"):::bucket
    Bucket5("Bucket 5 (polymorphicPartition)<br />|Reserved<br />Deps: 16, 203<br />ᐳReserved<br /><br />1: PgSelect[33]<br />ᐳ: Access[37]<br />2: First[38]<br />ᐳ: PgSelectSingle[39]"):::bucket
    Bucket6("Bucket 6 (polymorphicPartition)<br />|ReservedPatchRecord<br />Deps: 16, 203<br />ᐳReservedPatchRecord<br /><br />1: PgSelect[43]<br />ᐳ: Access[47]<br />2: First[48]<br />ᐳ: PgSelectSingle[49]"):::bucket
    Bucket7("Bucket 7 (polymorphicPartition)<br />|ReservedInputRecord<br />Deps: 16, 203<br />ᐳReservedInputRecord<br /><br />1: PgSelect[53]<br />ᐳ: Access[57]<br />2: First[58]<br />ᐳ: PgSelectSingle[59]"):::bucket
    Bucket8("Bucket 8 (polymorphicPartition)<br />|DefaultValue<br />Deps: 16, 203<br />ᐳDefaultValue<br /><br />1: PgSelect[63]<br />ᐳ: Access[67]<br />2: First[68]<br />ᐳ: PgSelectSingle[69]"):::bucket
    Bucket9("Bucket 9 (polymorphicPartition)<br />|CompoundKey<br />Deps: 16, 203, 7<br />ᐳCompoundKey<br /><br />1: Access[204]<br />2: PgSelect[75]<br />ᐳ: Access[79]<br />3: First[80]<br />ᐳ: PgSelectSingle[81]"):::bucket
    Bucket10("Bucket 10 (polymorphicPartition)<br />|Person<br />Deps: 16, 203<br />ᐳPerson<br /><br />1: PgSelect[85]<br />ᐳ: Access[89]<br />2: First[90]<br />ᐳ: PgSelectSingle[91]"):::bucket
    Bucket11("Bucket 11 (polymorphicPartition)<br />|Post<br />Deps: 16, 203<br />ᐳPost<br /><br />1: PgSelect[95]<br />ᐳ: Access[99]<br />2: First[100]<br />ᐳ: PgSelectSingle[101]"):::bucket
    Bucket12("Bucket 12 (polymorphicPartition)<br />|Type<br />Deps: 16, 203<br />ᐳType<br /><br />1: PgSelect[105]<br />ᐳ: Access[109]<br />2: First[110]<br />ᐳ: 111, 202"):::bucket
    Bucket13("Bucket 13 (polymorphicPartition)<br />|PersonSecret<br />Deps: 16, 203<br />ᐳPersonSecret<br /><br />1: PgSelect[115]<br />ᐳ: Access[119]<br />2: First[120]<br />ᐳ: PgSelectSingle[121]"):::bucket
    Bucket14("Bucket 14 (polymorphicPartition)<br />|LeftArm<br />Deps: 16, 203<br />ᐳLeftArm<br /><br />1: PgSelect[125]<br />ᐳ: Access[129]<br />2: First[130]<br />ᐳ: PgSelectSingle[131]"):::bucket
    Bucket15("Bucket 15 (polymorphicPartition)<br />|MyTable<br />Deps: 16, 203<br />ᐳMyTable<br /><br />1: PgSelect[135]<br />ᐳ: Access[139]<br />2: First[140]<br />ᐳ: PgSelectSingle[141]"):::bucket
    Bucket16("Bucket 16 (polymorphicPartition)<br />|ViewTable<br />Deps: 16, 203<br />ᐳViewTable<br /><br />1: PgSelect[145]<br />ᐳ: Access[149]<br />2: First[150]<br />ᐳ: PgSelectSingle[151]"):::bucket
    Bucket17("Bucket 17 (polymorphicPartition)<br />|SimilarTable1<br />Deps: 16, 203<br />ᐳSimilarTable1<br /><br />1: PgSelect[155]<br />ᐳ: Access[159]<br />2: First[160]<br />ᐳ: PgSelectSingle[161]"):::bucket
    Bucket18("Bucket 18 (polymorphicPartition)<br />|SimilarTable2<br />Deps: 16, 203<br />ᐳSimilarTable2<br /><br />1: PgSelect[165]<br />ᐳ: Access[169]<br />2: First[170]<br />ᐳ: PgSelectSingle[171]"):::bucket
    Bucket19("Bucket 19 (polymorphicPartition)<br />|NullTestRecord<br />Deps: 16, 203<br />ᐳNullTestRecord<br /><br />1: PgSelect[175]<br />ᐳ: Access[179]<br />2: First[180]<br />ᐳ: PgSelectSingle[181]"):::bucket
    Bucket20("Bucket 20 (polymorphicPartition)<br />|Issue756<br />Deps: 16, 203<br />ᐳIssue756<br /><br />1: PgSelect[185]<br />ᐳ: Access[189]<br />2: First[190]<br />ᐳ: PgSelectSingle[191]"):::bucket
    Bucket21("Bucket 21 (polymorphicPartition)<br />|List<br />Deps: 16, 203<br />ᐳList<br /><br />1: PgSelect[195]<br />ᐳ: Access[199]<br />2: First[200]<br />ᐳ: PgSelectSingle[201]"):::bucket
    end
    Bucket0 --> Bucket1
    Bucket1 --> Bucket2 & Bucket3 & Bucket4 & Bucket5 & Bucket6 & Bucket7 & Bucket8 & Bucket9 & Bucket10 & Bucket11 & Bucket12 & Bucket13 & Bucket14 & Bucket15 & Bucket16 & Bucket17 & Bucket18 & Bucket19 & Bucket20 & Bucket21

    %% plan dependencies
    Lambda7{{"Lambda[7∈0] ➊<br />ᐸdecodeNodeIdWithCodecsᐳ<br />Dependents: 3<br />More deps:<br />- Constantᐸ'WyJ0eXBlcyIsMTFd'ᐳ[205]"}}:::plan
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    Object16{{"Object[16∈1] ➊^<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access14{{"Access[14∈1] ➊<br />ᐸ2.pgSettingsᐳ<br />ᐳInput<br />ᐳPatch<br />ᐳReserved<br />ᐳReservedPatchRecord<br />ᐳReservedInputRecord<br />ᐳDefaultValue<br />ᐳCompoundKey<br />ᐳPerson<br />ᐳPost<br />ᐳType<br />ᐳPersonSecret<br />ᐳLeftArm<br />ᐳMyTable<br />ᐳViewTable<br />ᐳSimilarTable1<br />ᐳSimilarTable2<br />ᐳNullTestRecord<br />ᐳIssue756<br />ᐳList"}}:::plan
    Access15{{"Access[15∈1] ➊<br />ᐸ2.withPgClientᐳ<br />ᐳInput<br />ᐳPatch<br />ᐳReserved<br />ᐳReservedPatchRecord<br />ᐳReservedInputRecord<br />ᐳDefaultValue<br />ᐳCompoundKey<br />ᐳPerson<br />ᐳPost<br />ᐳType<br />ᐳPersonSecret<br />ᐳLeftArm<br />ᐳMyTable<br />ᐳViewTable<br />ᐳSimilarTable1<br />ᐳSimilarTable2<br />ᐳNullTestRecord<br />ᐳIssue756<br />ᐳList"}}:::plan
    Access14 & Access15 --> Object16
    __Value2 --> Access14
    __Value2 --> Access15
    Access203{{"Access[203∈1] ➊<br />ᐸ7.base64JSON.1ᐳ<br />ᐳInput<br />ᐳPatch<br />ᐳReserved<br />ᐳReservedPatchRecord<br />ᐳReservedInputRecord<br />ᐳDefaultValue<br />ᐳCompoundKey<br />ᐳPerson<br />ᐳPost<br />ᐳType<br />ᐳPersonSecret<br />ᐳLeftArm<br />ᐳMyTable<br />ᐳViewTable<br />ᐳSimilarTable1<br />ᐳSimilarTable2<br />ᐳNullTestRecord<br />ᐳIssue756<br />ᐳList<br />More deps:<br />- Lambda[7]"}}:::plan
    PgSelect13[["PgSelect[13∈3] ➊<br />ᐸinputsᐳ<br />ᐳInput"]]:::plan
    Access203 -->|rejectNull| PgSelect13
    Object16 --> PgSelect13
    Access17{{"Access[17∈3] ➊^<br />ᐸ13.itemsᐳ"}}:::plan
    PgSelect13 --> Access17
    First18[["First[18∈3] ➊^"]]:::plan
    Access17 --> First18
    PgSelectSingle19{{"PgSelectSingle[19∈3] ➊^<br />ᐸinputsᐳ"}}:::plan
    First18 --> PgSelectSingle19
    PgSelect23[["PgSelect[23∈4] ➊<br />ᐸpatchsᐳ<br />ᐳPatch"]]:::plan
    Access203 -->|rejectNull| PgSelect23
    Object16 --> PgSelect23
    Access27{{"Access[27∈4] ➊^<br />ᐸ23.itemsᐳ"}}:::plan
    PgSelect23 --> Access27
    First28[["First[28∈4] ➊^"]]:::plan
    Access27 --> First28
    PgSelectSingle29{{"PgSelectSingle[29∈4] ➊^<br />ᐸpatchsᐳ"}}:::plan
    First28 --> PgSelectSingle29
    PgSelect33[["PgSelect[33∈5] ➊<br />ᐸreservedᐳ<br />ᐳReserved"]]:::plan
    Access203 -->|rejectNull| PgSelect33
    Object16 --> PgSelect33
    Access37{{"Access[37∈5] ➊^<br />ᐸ33.itemsᐳ"}}:::plan
    PgSelect33 --> Access37
    First38[["First[38∈5] ➊^"]]:::plan
    Access37 --> First38
    PgSelectSingle39{{"PgSelectSingle[39∈5] ➊^<br />ᐸreservedᐳ"}}:::plan
    First38 --> PgSelectSingle39
    PgSelect43[["PgSelect[43∈6] ➊<br />ᐸreservedPatchsᐳ<br />ᐳReservedPatchRecord"]]:::plan
    Access203 -->|rejectNull| PgSelect43
    Object16 --> PgSelect43
    Access47{{"Access[47∈6] ➊^<br />ᐸ43.itemsᐳ"}}:::plan
    PgSelect43 --> Access47
    First48[["First[48∈6] ➊^"]]:::plan
    Access47 --> First48
    PgSelectSingle49{{"PgSelectSingle[49∈6] ➊^<br />ᐸreservedPatchsᐳ"}}:::plan
    First48 --> PgSelectSingle49
    PgSelect53[["PgSelect[53∈7] ➊<br />ᐸreserved_inputᐳ<br />ᐳReservedInputRecord"]]:::plan
    Access203 -->|rejectNull| PgSelect53
    Object16 --> PgSelect53
    Access57{{"Access[57∈7] ➊^<br />ᐸ53.itemsᐳ"}}:::plan
    PgSelect53 --> Access57
    First58[["First[58∈7] ➊^"]]:::plan
    Access57 --> First58
    PgSelectSingle59{{"PgSelectSingle[59∈7] ➊^<br />ᐸreserved_inputᐳ"}}:::plan
    First58 --> PgSelectSingle59
    PgSelect63[["PgSelect[63∈8] ➊<br />ᐸdefault_valueᐳ<br />ᐳDefaultValue"]]:::plan
    Access203 -->|rejectNull| PgSelect63
    Object16 --> PgSelect63
    Access67{{"Access[67∈8] ➊^<br />ᐸ63.itemsᐳ"}}:::plan
    PgSelect63 --> Access67
    First68[["First[68∈8] ➊^"]]:::plan
    Access67 --> First68
    PgSelectSingle69{{"PgSelectSingle[69∈8] ➊^<br />ᐸdefault_valueᐳ"}}:::plan
    First68 --> PgSelectSingle69
    PgSelect75[["PgSelect[75∈9] ➊^<br />ᐸcompound_keyᐳ"]]:::plan
    Access204{{"Access[204∈9] ➊<br />ᐸ7.base64JSON.2ᐳ<br />ᐳCompoundKey<br />More deps:<br />- Lambda[7]"}}:::plan
    Access203 -->|rejectNull| PgSelect75
    Access204 -->|rejectNull| PgSelect75
    Object16 --> PgSelect75
    Access79{{"Access[79∈9] ➊^<br />ᐸ75.itemsᐳ"}}:::plan
    PgSelect75 --> Access79
    First80[["First[80∈9] ➊^"]]:::plan
    Access79 --> First80
    PgSelectSingle81{{"PgSelectSingle[81∈9] ➊^<br />ᐸcompound_keyᐳ"}}:::plan
    First80 --> PgSelectSingle81
    PgSelect85[["PgSelect[85∈10] ➊<br />ᐸpersonᐳ<br />ᐳPerson"]]:::plan
    Access203 -->|rejectNull| PgSelect85
    Object16 --> PgSelect85
    Access89{{"Access[89∈10] ➊^<br />ᐸ85.itemsᐳ"}}:::plan
    PgSelect85 --> Access89
    First90[["First[90∈10] ➊^"]]:::plan
    Access89 --> First90
    PgSelectSingle91{{"PgSelectSingle[91∈10] ➊^<br />ᐸpersonᐳ"}}:::plan
    First90 --> PgSelectSingle91
    PgSelect95[["PgSelect[95∈11] ➊<br />ᐸpostᐳ<br />ᐳPost"]]:::plan
    Access203 -->|rejectNull| PgSelect95
    Object16 --> PgSelect95
    Access99{{"Access[99∈11] ➊^<br />ᐸ95.itemsᐳ"}}:::plan
    PgSelect95 --> Access99
    First100[["First[100∈11] ➊^"]]:::plan
    Access99 --> First100
    PgSelectSingle101{{"PgSelectSingle[101∈11] ➊^<br />ᐸpostᐳ"}}:::plan
    First100 --> PgSelectSingle101
    PgSelect105[["PgSelect[105∈12] ➊<br />ᐸtypesᐳ<br />ᐳType"]]:::plan
    Access203 -->|rejectNull| PgSelect105
    Object16 --> PgSelect105
    Access109{{"Access[109∈12] ➊^<br />ᐸ105.itemsᐳ"}}:::plan
    PgSelect105 --> Access109
    First110[["First[110∈12] ➊^"]]:::plan
    Access109 --> First110
    PgSelectSingle111{{"PgSelectSingle[111∈12] ➊^<br />ᐸtypesᐳ"}}:::plan
    First110 --> PgSelectSingle111
    PgClassExpression202{{"PgClassExpression[202∈12] ➊^<br />ᐸ__types__.”id”ᐳ"}}:::plan
    PgSelectSingle111 --> PgClassExpression202
    PgSelect115[["PgSelect[115∈13] ➊<br />ᐸperson_secretᐳ<br />ᐳPersonSecret"]]:::plan
    Access203 -->|rejectNull| PgSelect115
    Object16 --> PgSelect115
    Access119{{"Access[119∈13] ➊^<br />ᐸ115.itemsᐳ"}}:::plan
    PgSelect115 --> Access119
    First120[["First[120∈13] ➊^"]]:::plan
    Access119 --> First120
    PgSelectSingle121{{"PgSelectSingle[121∈13] ➊^<br />ᐸperson_secretᐳ"}}:::plan
    First120 --> PgSelectSingle121
    PgSelect125[["PgSelect[125∈14] ➊<br />ᐸleft_armᐳ<br />ᐳLeftArm"]]:::plan
    Access203 -->|rejectNull| PgSelect125
    Object16 --> PgSelect125
    Access129{{"Access[129∈14] ➊^<br />ᐸ125.itemsᐳ"}}:::plan
    PgSelect125 --> Access129
    First130[["First[130∈14] ➊^"]]:::plan
    Access129 --> First130
    PgSelectSingle131{{"PgSelectSingle[131∈14] ➊^<br />ᐸleft_armᐳ"}}:::plan
    First130 --> PgSelectSingle131
    PgSelect135[["PgSelect[135∈15] ➊<br />ᐸmy_tableᐳ<br />ᐳMyTable"]]:::plan
    Access203 -->|rejectNull| PgSelect135
    Object16 --> PgSelect135
    Access139{{"Access[139∈15] ➊^<br />ᐸ135.itemsᐳ"}}:::plan
    PgSelect135 --> Access139
    First140[["First[140∈15] ➊^"]]:::plan
    Access139 --> First140
    PgSelectSingle141{{"PgSelectSingle[141∈15] ➊^<br />ᐸmy_tableᐳ"}}:::plan
    First140 --> PgSelectSingle141
    PgSelect145[["PgSelect[145∈16] ➊<br />ᐸview_tableᐳ<br />ᐳViewTable"]]:::plan
    Access203 -->|rejectNull| PgSelect145
    Object16 --> PgSelect145
    Access149{{"Access[149∈16] ➊^<br />ᐸ145.itemsᐳ"}}:::plan
    PgSelect145 --> Access149
    First150[["First[150∈16] ➊^"]]:::plan
    Access149 --> First150
    PgSelectSingle151{{"PgSelectSingle[151∈16] ➊^<br />ᐸview_tableᐳ"}}:::plan
    First150 --> PgSelectSingle151
    PgSelect155[["PgSelect[155∈17] ➊<br />ᐸsimilar_table_1ᐳ<br />ᐳSimilarTable1"]]:::plan
    Access203 -->|rejectNull| PgSelect155
    Object16 --> PgSelect155
    Access159{{"Access[159∈17] ➊^<br />ᐸ155.itemsᐳ"}}:::plan
    PgSelect155 --> Access159
    First160[["First[160∈17] ➊^"]]:::plan
    Access159 --> First160
    PgSelectSingle161{{"PgSelectSingle[161∈17] ➊^<br />ᐸsimilar_table_1ᐳ"}}:::plan
    First160 --> PgSelectSingle161
    PgSelect165[["PgSelect[165∈18] ➊<br />ᐸsimilar_table_2ᐳ<br />ᐳSimilarTable2"]]:::plan
    Access203 -->|rejectNull| PgSelect165
    Object16 --> PgSelect165
    Access169{{"Access[169∈18] ➊^<br />ᐸ165.itemsᐳ"}}:::plan
    PgSelect165 --> Access169
    First170[["First[170∈18] ➊^"]]:::plan
    Access169 --> First170
    PgSelectSingle171{{"PgSelectSingle[171∈18] ➊^<br />ᐸsimilar_table_2ᐳ"}}:::plan
    First170 --> PgSelectSingle171
    PgSelect175[["PgSelect[175∈19] ➊<br />ᐸnull_test_recordᐳ<br />ᐳNullTestRecord"]]:::plan
    Access203 -->|rejectNull| PgSelect175
    Object16 --> PgSelect175
    Access179{{"Access[179∈19] ➊^<br />ᐸ175.itemsᐳ"}}:::plan
    PgSelect175 --> Access179
    First180[["First[180∈19] ➊^"]]:::plan
    Access179 --> First180
    PgSelectSingle181{{"PgSelectSingle[181∈19] ➊^<br />ᐸnull_test_recordᐳ"}}:::plan
    First180 --> PgSelectSingle181
    PgSelect185[["PgSelect[185∈20] ➊<br />ᐸissue756ᐳ<br />ᐳIssue756"]]:::plan
    Access203 -->|rejectNull| PgSelect185
    Object16 --> PgSelect185
    Access189{{"Access[189∈20] ➊^<br />ᐸ185.itemsᐳ"}}:::plan
    PgSelect185 --> Access189
    First190[["First[190∈20] ➊^"]]:::plan
    Access189 --> First190
    PgSelectSingle191{{"PgSelectSingle[191∈20] ➊^<br />ᐸissue756ᐳ"}}:::plan
    First190 --> PgSelectSingle191
    PgSelect195[["PgSelect[195∈21] ➊<br />ᐸlistsᐳ<br />ᐳList"]]:::plan
    Access203 -->|rejectNull| PgSelect195
    Object16 --> PgSelect195
    Access199{{"Access[199∈21] ➊^<br />ᐸ195.itemsᐳ"}}:::plan
    PgSelect195 --> Access199
    First200[["First[200∈21] ➊^"]]:::plan
    Access199 --> First200
    PgSelectSingle201{{"PgSelectSingle[201∈21] ➊^<br />ᐸlistsᐳ"}}:::plan
    First200 --> PgSelectSingle201

    %% define steps
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,Lambda7 bucket0
    classDef bucket1 stroke:#00bfff
    class Bucket1,Access14,Access15,Object16,Access203 bucket1
    classDef bucket2 stroke:#7f007f
    class Bucket2 bucket2
    classDef bucket3 stroke:#ffa500
    class Bucket3,PgSelect13,Access17,First18,PgSelectSingle19 bucket3
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgSelect23,Access27,First28,PgSelectSingle29 bucket4
    classDef bucket5 stroke:#7fff00
    class Bucket5,PgSelect33,Access37,First38,PgSelectSingle39 bucket5
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgSelect43,Access47,First48,PgSelectSingle49 bucket6
    classDef bucket7 stroke:#808000
    class Bucket7,PgSelect53,Access57,First58,PgSelectSingle59 bucket7
    classDef bucket8 stroke:#dda0dd
    class Bucket8,PgSelect63,Access67,First68,PgSelectSingle69 bucket8
    classDef bucket9 stroke:#ff0000
    class Bucket9,PgSelect75,Access79,First80,PgSelectSingle81,Access204 bucket9
    classDef bucket10 stroke:#ffff00
    class Bucket10,PgSelect85,Access89,First90,PgSelectSingle91 bucket10
    classDef bucket11 stroke:#00ffff
    class Bucket11,PgSelect95,Access99,First100,PgSelectSingle101 bucket11
    classDef bucket12 stroke:#4169e1
    class Bucket12,PgSelect105,Access109,First110,PgSelectSingle111,PgClassExpression202 bucket12
    classDef bucket13 stroke:#3cb371
    class Bucket13,PgSelect115,Access119,First120,PgSelectSingle121 bucket13
    classDef bucket14 stroke:#a52a2a
    class Bucket14,PgSelect125,Access129,First130,PgSelectSingle131 bucket14
    classDef bucket15 stroke:#ff00ff
    class Bucket15,PgSelect135,Access139,First140,PgSelectSingle141 bucket15
    classDef bucket16 stroke:#f5deb3
    class Bucket16,PgSelect145,Access149,First150,PgSelectSingle151 bucket16
    classDef bucket17 stroke:#696969
    class Bucket17,PgSelect155,Access159,First160,PgSelectSingle161 bucket17
    classDef bucket18 stroke:#00bfff
    class Bucket18,PgSelect165,Access169,First170,PgSelectSingle171 bucket18
    classDef bucket19 stroke:#7f007f
    class Bucket19,PgSelect175,Access179,First180,PgSelectSingle181 bucket19
    classDef bucket20 stroke:#ffa500
    class Bucket20,PgSelect185,Access189,First190,PgSelectSingle191 bucket20
    classDef bucket21 stroke:#0000ff
    class Bucket21,PgSelect195,Access199,First200,PgSelectSingle201 bucket21

